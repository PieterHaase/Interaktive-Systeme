[gd_scene load_steps=25 format=2]

[ext_resource path="res://materials/walls/new_shadermaterial.tres" type="Material" id=1]
[ext_resource path="res://prefabs/Player.tscn" type="PackedScene" id=2]
[ext_resource path="res://prefabs/Enemy.tscn" type="PackedScene" id=3]
[ext_resource path="res://prefabs/Lasers.tscn" type="PackedScene" id=4]
[ext_resource path="res://prefabs/Surveillance_Camera.tscn" type="PackedScene" id=5]
[ext_resource path="res://prefabs/Terminal.tscn" type="PackedScene" id=6]
[ext_resource path="res://prefabs/Ghost_Trap.tscn" type="PackedScene" id=7]
[ext_resource path="res://materials/floor/floor_material.tres" type="Material" id=8]
[ext_resource path="res://GameStats.gd" type="Script" id=9]
[ext_resource path="res://prefabs/Goal.tscn" type="PackedScene" id=10]
[ext_resource path="res://GameLogic.gd" type="Script" id=11]
[ext_resource path="res://prefabs/Keypad.tscn" type="PackedScene" id=12]
[ext_resource path="res://import/SpiderWeb_output.png" type="Texture" id=14]

[sub_resource type="BoxShape" id=1]

[sub_resource type="BoxShape" id=13]
extents = Vector3( 0.494418, 1, 1 )

[sub_resource type="CubeMesh" id=2]

[sub_resource type="ProceduralSky" id=29]
sky_top_color = Color( 0.2184, 0.234347, 0.26, 1 )
sky_horizon_color = Color( 0.37, 0.361613, 0.3071, 1 )
sky_curve = 0.0419865
ground_bottom_color = Color( 0.09, 0.09, 0.09, 1 )
ground_horizon_color = Color( 0.219608, 0.203922, 0.192157, 1 )
ground_energy = 0.5

[sub_resource type="Environment" id=11]
background_mode = 2
background_sky = SubResource( 29 )
background_sky_custom_fov = 50.0
background_color = Color( 0.18, 0.18, 0.18, 1 )
background_energy = 2.7
ambient_light_color = Color( 0.8, 0.8, 0.8, 1 )
ambient_light_energy = 0.5
ss_reflections_max_steps = 16
ssao_intensity = 5.0
ssao_radius2 = 20.0
ssao_intensity2 = 0.3
ssao_blur = 2
dof_blur_far_distance = 25.0
glow_enabled = true
glow_intensity = 2.17
glow_strength = 1.2
glow_hdr_threshold = 0.6
adjustment_enabled = true
adjustment_contrast = 1.24

[sub_resource type="QuadMesh" id=30]

[sub_resource type="VisualShaderNodeTexture" id=31]
texture = ExtResource( 14 )

[sub_resource type="VisualShaderNodeColorConstant" id=32]
constant = Color( 0.81, 0.81, 0.81, 1 )

[sub_resource type="VisualShaderNodeScalarOp" id=33]
output_port_for_preview = 0
default_input_values = [ 0, 0.0, 1, 2.0 ]
operator = 2

[sub_resource type="VisualShader" id=34]
code = "shader_type spatial;
render_mode cull_disabled, specular_schlick_ggx, shadows_disabled;

uniform sampler2D tex_frg_2;



void vertex() {
// Output:0

}

void fragment() {
// Color:3
	vec3 n_out3p0 = vec3(0.810000, 0.810000, 0.810000);
	float n_out3p1 = 1.000000;

// Texture:2
	vec4 tex_frg_2_read = texture(tex_frg_2, UV.xy);
	vec3 n_out2p0 = tex_frg_2_read.rgb;
	float n_out2p1 = tex_frg_2_read.a;

// ScalarOp:4
	float n_in4p1 = 2.00000;
	float n_out4p0 = dot(n_out2p0, vec3(0.333333, 0.333333, 0.333333)) * n_in4p1;

// Output:0
	ALBEDO = n_out3p0;
	ALPHA = n_out4p0;

}

void light() {
// Output:0

}
"
graph_offset = Vector2( -844.186, -143.153 )
modes/cull = 2
flags/shadows_disabled = true
nodes/fragment/2/node = SubResource( 31 )
nodes/fragment/2/position = Vector2( -280, 180 )
nodes/fragment/3/node = SubResource( 32 )
nodes/fragment/3/position = Vector2( 180, 140 )
nodes/fragment/4/node = SubResource( 33 )
nodes/fragment/4/position = Vector2( 0, 240 )
nodes/fragment/connections = PoolIntArray( 3, 0, 0, 0, 2, 0, 4, 0, 4, 0, 0, 1 )

[sub_resource type="ShaderMaterial" id=35]
shader = SubResource( 34 )

[node name="Level" type="Spatial"]
script = ExtResource( 11 )

[node name="DirectionalLight" type="DirectionalLight" parent="."]
transform = Transform( -0.736345, -0.639052, 0.222279, 0, 0.328521, 0.944497, -0.676606, 0.695476, -0.241905, 0, 7.70713, -15.7679 )
visible = false
light_energy = 0.5
shadow_enabled = true
shadow_color = Color( 0.76, 0.76, 0.76, 1 )
shadow_contact = 0.4

[node name="Player" parent="." instance=ExtResource( 2 )]
transform = Transform( -1.62921e-07, 0, 1, 0, 1, 0, -1, 0, -1.62921e-07, 4, 1, 10 )

[node name="Floor" type="Spatial" parent="."]
transform = Transform( 7, 0, 0, 0, 0.1, 0, 0, 0, 12, -2, -0.1, 0 )

[node name="Colliders" type="StaticBody" parent="Floor"]
visible = false

[node name="CollisionShape" type="CollisionShape" parent="Floor/Colliders"]
shape = SubResource( 1 )

[node name="CollisionShape2" type="CollisionShape" parent="Floor/Colliders"]
transform = Transform( -8.74228e-07, 0, 0, 20, 0, 0, 0, 0, 1, 1.05, 10, 0 )
shape = SubResource( 13 )

[node name="CollisionShape3" type="CollisionShape" parent="Floor/Colliders"]
transform = Transform( -8.74228e-07, 0, 0, 20, 0, 0, 0, 0, 1, -1.05, 10, 0 )
shape = SubResource( 13 )

[node name="CollisionShape4" type="CollisionShape" parent="Floor/Colliders"]
transform = Transform( 3.82137e-14, 0, 1, 20, 0, 0, 8.74228e-07, 0, -4.37114e-08, 0, 10, 1.03 )
shape = SubResource( 13 )

[node name="CollisionShape5" type="CollisionShape" parent="Floor/Colliders"]
transform = Transform( 3.82137e-14, 0, 1, 20, 0, 0, 8.74228e-07, 0, -4.37114e-08, 0, 10, -1.03 )
shape = SubResource( 13 )

[node name="MeshInstance" type="MeshInstance" parent="Floor"]
layers = 2
mesh = SubResource( 2 )
skeleton = NodePath("../Colliders/CollisionShape")
material/0 = ExtResource( 8 )

[node name="Wall" type="StaticBody" parent="."]
transform = Transform( 3, 0, 0, 0, 1.5, 0, 0, 0, 3, -2, 1.5, 5 )

[node name="CollisionShape" type="CollisionShape" parent="Wall"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Wall"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0118291, 0, 0 )
mesh = SubResource( 2 )
skeleton = NodePath("../CollisionShape")
material/0 = ExtResource( 1 )

[node name="Wall3" type="StaticBody" parent="."]
transform = Transform( 2.1, 0, 0, 0, 1.5, 0, 0, 0, 1, -6.91, 1.5, 3 )

[node name="CollisionShape" type="CollisionShape" parent="Wall3"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Wall3"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0118291, 0, 0 )
mesh = SubResource( 2 )
skeleton = NodePath("../CollisionShape")
material/0 = ExtResource( 1 )

[node name="Wall2" type="StaticBody" parent="."]
transform = Transform( 3, 0, 0, 0, 1.5, 0, 0, 0, 3, -2, 1.5, -5 )

[node name="CollisionShape" type="CollisionShape" parent="Wall2"]
shape = SubResource( 1 )

[node name="MeshInstance" type="MeshInstance" parent="Wall2"]
mesh = SubResource( 2 )
skeleton = NodePath("../CollisionShape")
material/0 = ExtResource( 1 )

[node name="Goal" parent="." instance=ExtResource( 10 )]

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( 11 )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="ColorRect" type="ColorRect" parent="CanvasLayer"]
visible = false
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 1, 0, 0.02, 0.1 )

[node name="GameOverText" type="Label" parent="CanvasLayer"]
visible = false
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
margin_left = -65.0
margin_top = -25.5
margin_right = 65.0
margin_bottom = 25.5
custom_colors/font_color = Color( 1, 1, 1, 1 )
custom_colors/font_color_shadow = Color( 0, 0, 0, 1 )
text = "Mission Failed"
align = 1
valign = 1

[node name="Prompt" type="Label" parent="CanvasLayer"]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_top = -52.0
align = 1

[node name="GameStats" type="MarginContainer" parent="CanvasLayer"]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 10.0
margin_top = 10.0
margin_right = -10.0
margin_bottom = -10.0
script = ExtResource( 9 )

[node name="HBoxContainer" type="HBoxContainer" parent="CanvasLayer/GameStats"]
margin_right = 1004.0
margin_bottom = 580.0

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/GameStats/HBoxContainer"]
margin_right = 77.0
margin_bottom = 580.0

[node name="Stat1" type="Label" parent="CanvasLayer/GameStats/HBoxContainer/VBoxContainer"]
margin_right = 77.0
margin_bottom = 14.0
text = "This is Stat1"

[node name="Stat2" type="Label" parent="CanvasLayer/GameStats/HBoxContainer/VBoxContainer"]
margin_top = 18.0
margin_right = 77.0
margin_bottom = 32.0
text = "This is Stat2"

[node name="Ghost_Trap" parent="." instance=ExtResource( 7 )]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -3.37325, 0, -9.99927 )

[node name="SpiderWeb" type="MeshInstance" parent="."]
transform = Transform( -6.11959e-08, 0, 1, 0, 1, 0, -1.4, 0, -4.37114e-08, 1.053, 2.49743, 7.31004 )
mesh = SubResource( 30 )
material/0 = SubResource( 35 )

[node name="SpiderWeb3" type="MeshInstance" parent="."]
transform = Transform( -1.4, -2.54856e-07, 1.09603e-07, -1.53444e-07, 0.725867, 0.687835, 3.56798e-07, -0.687835, 0.725867, -5.64258, 2.52791, 4.32374 )
mesh = SubResource( 30 )
material/0 = SubResource( 35 )

[node name="SpiderWeb2" type="MeshInstance" parent="."]
transform = Transform( -6.11959e-08, 0, 1, 0, -1, 0, -1.4, 0, -4.37114e-08, 4.87726, 0.4937, -5.85597 )
mesh = SubResource( 30 )
material/0 = SubResource( 35 )

[node name="Enemy" parent="." instance=ExtResource( 3 )]
transform = Transform( -4.37114e-08, 0, -1, 0, 1, 0, 1, 0, -4.37114e-08, -2.0176, 1, 0 )

[node name="Surveillance_Camera" parent="." instance=ExtResource( 5 )]
transform = Transform( -0.661875, 0, -0.749614, 0, 1, 0, 0.749614, 0, -0.661875, -8.64306, 1, 4.14137 )

[node name="Lasers" parent="." instance=ExtResource( 4 )]
transform = Transform( -4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 1.025, 0.6, -5.037 )

[node name="Lasers2" parent="." instance=ExtResource( 4 )]
transform = Transform( -1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, -4.691, 0.6, 1.907 )

[node name="Keypad" parent="." instance=ExtResource( 12 )]
transform = Transform( -1, 0, -1.81195e-07, 0, 1, 0, 1.50996e-07, 0, -1.2, -4.98987, 0, 6.57324 )

[node name="Terminal" parent="." instance=ExtResource( 6 )]
transform = Transform( -4.37114e-08, 0, 1.2, 0, 1, 0, -1, 0, -5.24537e-08, -7.37062e-07, 0.128237, -8.04652 )

[connection signal="victory" from="Goal" to="." method="_on_Goal_victory"]
[connection signal="gameOver" from="Ghost_Trap" to="." method="_on_Ghost_Trap_gameOver"]
[connection signal="deactivateTraps" from="Keypad" to="Ghost_Trap" method="_on_Keypad_deactivateTraps"]
